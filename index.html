<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gestione Obbligatori</title>
  <link rel="stylesheet" href="style.css?v=1.4">
  <link rel="icon" href="Logo-FBM_2023.png" type="image/png">
</head>
<body>

  <div class="container">

    <div class="app-header">
      <img id="appLogo" src="Logo-FBM_2023.png" alt="Logo FBM">
      <h1>Gestione Obbligatori</h1>
    </div>

    <div class="file-loader">
      <label for="csvFileInput">Carica file CSV:</label>
      <input type="file" id="csvFileInput" accept=".csv">
      <div id="statusMessage"></div>
    </div>

    <!-- Banner revisione mensile -->
    <div id="auditReminder" class="audit-banner" style="display:none;">
      <p>üìù Revisione giacenze disponibile. Puoi confermarla una volta al mese.</p>
      <button id="startAuditButton">Avvia Revisione</button>
    </div>

    <!-- Pulsante per test/reset revisione -->
    <div class="reset-audit-container">
      <button id="resetAuditButton" class="reset-audit">Reset Revisione</button>
    </div>

    <!-- Sezione Storico Revisioni -->
    <div id="auditHistorySection" style="display:none;">
      <h2>Storico Revisioni</h2>
      <ul id="auditHistoryList" class="audit-history-list"></ul>
    </div>

    <!-- Vista snapshot di una revisione -->
    <div id="auditSnapshotView" class="table-container" style="display:none;">
      <h3>Dati Revisione: <span id="snapshotDate"></span></h3>
      <table id="snapshotTable">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Codice AIC</th>
            <th>Giacenza</th>
            <th>Ubicazione</th>
            <th>Scadenza</th>
          </tr>
        </thead>
        <tbody id="snapshotTableBody"></tbody>
      </table>
      <button id="closeSnapshotButton">Chiudi</button>
    </div>

    <div id="interactionArea" style="display:none;">

      <div class="filters-box">
        <div class="search-box">
          <input type="text" id="searchInput" placeholder="Cerca per codice o nome...">
          <button id="searchButton">Cerca</button>
          <button id="showAllButton">Mostra Tutti</button>
          <button id="checkExpiryButton">In Scadenza</button>
          <button id="checkStockButton">Giacenza Zero</button>
          <button id="downloadExcelButton">Esporta CSV</button>
          <button id="printButton">Stampa Tabella</button>
        </div>
        <div class="location-filter-box">
          <label for="locationFilter">Ubicazione:</label>
          <select id="locationFilter">
            <option value="">Tutte</option>
          </select>
        </div>
      </div>

      <div class="table-container">
        <table id="resultsTable">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Codice AIC</th>
              <th>Giacenza</th>
              <th>Ubicazione</th>
              <th>Scadenza</th>
            </tr>
          </thead>
          <tbody id="resultsTableBody"></tbody>
        </table>
      </div>

      <div id="notFoundMessageArea" class="not-found" style="display:none;"></div>
    </div>

  </div>

  <!-- Toast per notifiche -->
  <div id="toast" class="toast-message"></div>

  <script src="script.js?v=1.4"></script>
</body>
</html>
